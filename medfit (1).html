<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>MedFit â€“ Your Health Manager</title>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet"/>
<style>
  *{box-sizing:border-box;margin:0;padding:0;}
  :root{
    --bg:#0A0F1E;--card:#111827;--border:#1E2A3A;
    --accent:#00E5A0;--accent-dim:#00E5A020;
    --blue:#3B82F6;--blue-dim:#3B82F620;
    --purple:#A855F7;--purple-dim:#A855F720;
    --orange:#F97316;--orange-dim:#F9731620;
    --red:#EF4444;--red-dim:#EF444420;
    --text:#F1F5F9;--muted:#64748B;--sub:#94A3B8;
    --inner:#0D1526;
  }
  body{font-family:'DM Sans',sans-serif;background:var(--bg);color:var(--text);min-height:100vh;display:flex;}
  ::-webkit-scrollbar{width:4px;}
  ::-webkit-scrollbar-track{background:var(--card);}
  ::-webkit-scrollbar-thumb{background:var(--border);border-radius:2px;}

  /* SIDEBAR */
  #sidebar{
    width:220px;min-height:100vh;background:var(--inner);
    border-right:1px solid var(--border);display:flex;flex-direction:column;
    transition:width 0.25s;flex-shrink:0;
  }
  #sidebar.collapsed{width:64px;}
  .logo{padding:24px 16px 16px;border-bottom:1px solid var(--border);display:flex;align-items:center;gap:10px;overflow:hidden;}
  .logo-icon{width:36px;height:36px;background:var(--accent);border-radius:10px;display:flex;align-items:center;justify-content:center;font-family:'Syne',sans-serif;font-weight:800;font-size:16px;color:#0A0F1E;flex-shrink:0;}
  .logo-text{font-family:'Syne',sans-serif;font-weight:800;font-size:20px;color:var(--accent);white-space:nowrap;transition:opacity 0.2s;}
  #sidebar.collapsed .logo-text{opacity:0;width:0;overflow:hidden;}
  nav{flex:1;padding:12px 10px;}
  .nav-btn{
    width:100%;display:flex;align-items:center;gap:12px;padding:11px 12px;
    border-radius:10px;border:none;background:transparent;color:var(--muted);
    font-size:14px;font-family:'DM Sans',sans-serif;font-weight:400;
    margin-bottom:4px;cursor:pointer;transition:all 0.15s;text-align:left;
    white-space:nowrap;overflow:hidden;
  }
  .nav-btn:hover{background:var(--accent-dim);color:var(--accent);}
  .nav-btn.active{background:var(--accent-dim);color:var(--accent);font-weight:600;}
  .nav-icon{font-size:16px;flex-shrink:0;}
  .nav-label{transition:opacity 0.2s;}
  #sidebar.collapsed .nav-label{opacity:0;width:0;overflow:hidden;}
  .nav-dot{margin-left:auto;width:6px;height:6px;background:var(--accent);border-radius:50%;flex-shrink:0;}
  #sidebar.collapsed .nav-dot{display:none;}
  .sidebar-footer{padding:12px 10px;border-top:1px solid var(--border);}
  .toggle-btn{
    width:100%;padding:10px 12px;border-radius:10px;border:none;
    background:transparent;color:var(--muted);font-size:18px;cursor:pointer;
    display:flex;justify-content:flex-end;transition:all 0.2s;
  }
  #sidebar.collapsed .toggle-btn{justify-content:center;}
  .toggle-btn:hover{color:var(--accent);}

  /* MAIN */
  #main{flex:1;overflow:auto;padding:32px 28px;}

  /* PAGE */
  .page{display:none;animation:fadeIn 0.3s ease;}
  .page.active{display:block;}
  @keyframes fadeIn{from{opacity:0;transform:translateY(8px);}to{opacity:1;transform:translateY(0);}}
  @keyframes pulse{0%,100%{opacity:1;}50%{opacity:0.4;}}

  /* CARDS */
  .card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:20px;}
  .card-hover{cursor:pointer;transition:border-color 0.2s,transform 0.15s;}
  .card-hover:hover{border-color:var(--accent);transform:translateY(-1px);}

  /* GRID */
  .grid-4{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:16px;}
  .grid-2{display:grid;grid-template-columns:1fr 1fr;gap:16px;}
  .grid-cards{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:14px;}
  .grid-report{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:12px;}
  .flex-col{display:flex;flex-direction:column;gap:10px;}

  /* STAT CARD */
  .stat-card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:20px 22px;}
  .stat-label{font-size:12px;color:var(--muted);margin-bottom:8px;text-transform:uppercase;letter-spacing:1px;}
  .stat-value{font-family:'Syne',sans-serif;font-weight:800;font-size:32px;}
  .stat-sub{font-size:12px;color:var(--muted);margin-top:4px;}
  .stat-icon{font-size:28px;border-radius:12px;padding:10px 12px;}

  /* BUTTONS */
  .btn{border:none;border-radius:10px;font-weight:600;font-family:'DM Sans',sans-serif;cursor:pointer;transition:all 0.2s;font-size:14px;padding:10px 20px;}
  .btn-primary{background:var(--accent);color:#0A0F1E;}
  .btn-primary:hover{opacity:0.9;transform:translateY(-1px);}
  .btn-danger{background:var(--red-dim);color:var(--red);border:1px solid rgba(239,68,68,0.25);font-size:12px;padding:6px 14px;}
  .btn-ghost{background:transparent;color:var(--sub);border:1px solid var(--border);padding:10px 20px;}
  .btn-blue{background:var(--blue-dim);color:var(--blue);border:1px solid rgba(59,130,246,0.25);font-size:12px;padding:6px 14px;}
  .btn-full{width:100%;}
  .btn-sm{font-size:12px;padding:6px 14px;}

  /* PAGE HEADER */
  .page-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;}
  .page-title{font-family:'Syne',sans-serif;font-weight:800;font-size:24px;}
  .page-sub{color:var(--muted);margin-top:2px;font-size:14px;}

  /* INNER ROWS */
  .inner-row{background:var(--inner);border-radius:10px;padding:10px 12px;margin-bottom:8px;}
  .inner-row-lg{background:var(--inner);border-radius:12px;padding:12px 14px;margin-bottom:8px;}

  /* BADGES */
  .badge{font-size:11px;border-radius:6px;padding:3px 10px;font-weight:600;}
  .badge-blue{background:var(--blue-dim);color:var(--blue);}
  .badge-red{background:var(--red-dim);color:var(--red);}
  .badge-muted{background:var(--border);color:var(--muted);}
  .badge-green{background:var(--accent-dim);color:var(--accent);}

  /* MODAL */
  .modal-overlay{
    position:fixed;inset:0;background:rgba(0,0,0,0.6);z-index:100;
    display:none;align-items:center;justify-content:center;padding:20px;
  }
  .modal-overlay.open{display:flex;}
  .modal-box{
    background:var(--card);border:1px solid var(--border);border-radius:20px;
    padding:28px;width:100%;max-width:460px;max-height:90vh;overflow-y:auto;
    animation:fadeIn 0.25s ease;
  }
  .modal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;}
  .modal-title{font-family:'Syne',sans-serif;font-weight:700;font-size:18px;}
  .modal-close{background:none;border:none;color:var(--muted);font-size:20px;cursor:pointer;}
  .modal-close:hover{color:var(--text);}

  /* FORM */
  .field{margin-bottom:16px;}
  .field label{display:block;font-size:12px;font-weight:500;color:var(--sub);margin-bottom:6px;text-transform:uppercase;letter-spacing:1px;}
  input,select,textarea{
    background:var(--inner);border:1px solid var(--border);color:var(--text);
    border-radius:10px;padding:10px 14px;font-family:'DM Sans',sans-serif;
    font-size:14px;width:100%;outline:none;transition:border 0.2s;
  }
  input:focus,select:focus,textarea:focus{border-color:var(--accent);}
  input::placeholder,textarea::placeholder{color:var(--muted);}
  select option{background:var(--inner);}
  .grid-2-form{display:grid;grid-template-columns:1fr 1fr;gap:12px;}
  .modal-btns{display:flex;gap:10px;margin-top:8px;}

  /* MED CARD TOP BAR */
  .med-top{position:absolute;top:0;left:0;right:0;height:3px;border-radius:16px 16px 0 0;}

  /* EMPTY STATE */
  .empty{text-align:center;padding:48px;color:var(--muted);}
  .empty-icon{font-size:40px;margin-bottom:12px;}

  /* UPLOAD AREA */
  .upload-area{
    border:2px dashed var(--border);border-radius:12px;padding:24px;
    text-align:center;color:var(--muted);font-size:14px;margin-bottom:16px;
  }
  .upload-link{color:var(--accent);cursor:pointer;}

  /* PULSE DOT */
  .pulse-dot{width:8px;height:8px;background:var(--accent);border-radius:50%;display:block;animation:pulse 2s infinite;}

  /* SCROLLABLE CONTENT */
  .section-title{font-family:'Syne',sans-serif;font-weight:700;margin-bottom:16px;font-size:15px;}

  /* RESPONSIVE */
  @media(max-width:640px){
    .grid-2{grid-template-columns:1fr;}
    .grid-4{grid-template-columns:1fr 1fr;}
    #main{padding:20px 16px;}
    .modal-btns{flex-direction:column;}
  }
</style>
</head>
<body>

<!-- SIDEBAR -->
<div id="sidebar">
  <div class="logo">
    <div class="logo-icon">M</div>
    <span class="logo-text">MedFit</span>
  </div>
  <nav>
    <button class="nav-btn active" onclick="showPage('dashboard',this)">
      <span class="nav-icon">âŠ</span>
      <span class="nav-label">Dashboard</span>
      <span class="nav-dot"></span>
    </button>
    <button class="nav-btn" onclick="showPage('medicines',this)">
      <span class="nav-icon">ğŸ’Š</span>
      <span class="nav-label">Medicines</span>
    </button>
    <button class="nav-btn" onclick="showPage('appointments',this)">
      <span class="nav-icon">ğŸ“…</span>
      <span class="nav-label">Appointments</span>
    </button>
    <button class="nav-btn" onclick="showPage('reports',this)">
      <span class="nav-icon">ğŸ“‚</span>
      <span class="nav-label">Reports</span>
    </button>
    <button class="nav-btn" onclick="showPage('payments',this)">
      <span class="nav-icon">ğŸ’³</span>
      <span class="nav-label">Payments</span>
    </button>
  </nav>
  <div class="sidebar-footer">
    <button class="toggle-btn" onclick="toggleSidebar()">â—€</button>
  </div>
</div>

<!-- MAIN CONTENT -->
<div id="main">

  <!-- DASHBOARD -->
  <div id="page-dashboard" class="page active">
    <div style="margin-bottom:28px;">
      <div style="font-family:'Syne',sans-serif;font-weight:800;font-size:26px;">Good Morning ğŸ‘‹</div>
      <div style="color:var(--muted);margin-top:4px;" id="dash-date"></div>
    </div>
    <div class="grid-4" style="margin-bottom:28px;">
      <div class="stat-card">
        <div style="display:flex;justify-content:space-between;align-items:flex-start;">
          <div>
            <div class="stat-label">Active Medicines</div>
            <div class="stat-value" style="color:var(--accent);" id="stat-meds">0</div>
            <div class="stat-sub">Tracking daily</div>
          </div>
          <div class="stat-icon" style="background:var(--accent-dim);">ğŸ’Š</div>
        </div>
      </div>
      <div class="stat-card">
        <div style="display:flex;justify-content:space-between;align-items:flex-start;">
          <div>
            <div class="stat-label">Appointments</div>
            <div class="stat-value" style="color:var(--blue);" id="stat-appts">0</div>
            <div class="stat-sub" id="stat-appts-sub">0 upcoming</div>
          </div>
          <div class="stat-icon" style="background:var(--blue-dim);">ğŸ“…</div>
        </div>
      </div>
      <div class="stat-card">
        <div style="display:flex;justify-content:space-between;align-items:flex-start;">
          <div>
            <div class="stat-label">Reports Stored</div>
            <div class="stat-value" style="color:var(--purple);" id="stat-reports">0</div>
            <div class="stat-sub">Docs & images</div>
          </div>
          <div class="stat-icon" style="background:var(--purple-dim);">ğŸ“„</div>
        </div>
      </div>
      <div class="stat-card">
        <div style="display:flex;justify-content:space-between;align-items:flex-start;">
          <div>
            <div class="stat-label">Monthly Spend</div>
            <div class="stat-value" style="color:var(--orange);" id="stat-spend">â‚¹0</div>
            <div class="stat-sub">This month</div>
          </div>
          <div class="stat-icon" style="background:var(--orange-dim);">ğŸ’³</div>
        </div>
      </div>
    </div>
    <div class="grid-2">
      <div class="card">
        <div class="section-title">ğŸ’Š Today's Medicines</div>
        <div id="dash-meds-list"></div>
      </div>
      <div class="card">
        <div class="section-title">ğŸ“… Upcoming Appointments</div>
        <div id="dash-appts-list"></div>
      </div>
    </div>
  </div>

  <!-- MEDICINES -->
  <div id="page-medicines" class="page">
    <div class="page-header">
      <div>
        <div class="page-title">ğŸ’Š Medicines</div>
        <div class="page-sub" id="med-count">0 medicines being tracked</div>
      </div>
      <button class="btn btn-primary" onclick="openModal('med-modal')">+ Add Medicine</button>
    </div>
    <div class="grid-cards" id="med-list"></div>
  </div>

  <!-- APPOINTMENTS -->
  <div id="page-appointments" class="page">
    <div class="page-header">
      <div>
        <div class="page-title">ğŸ“… Appointments</div>
        <div class="page-sub" id="appt-count">0 appointments scheduled</div>
      </div>
      <button class="btn btn-primary" onclick="openModal('appt-modal')">+ Add Appointment</button>
    </div>
    <div class="flex-col" id="appt-list"></div>
  </div>

  <!-- REPORTS -->
  <div id="page-reports" class="page">
    <div class="page-header">
      <div>
        <div class="page-title">ğŸ“‚ Reports & Prescriptions</div>
        <div class="page-sub" id="report-count">0 documents stored</div>
      </div>
      <button class="btn btn-primary" onclick="openModal('report-modal')">+ Add Report</button>
    </div>
    <div class="grid-report" id="report-cats" style="margin-bottom:24px;"></div>
    <div class="flex-col" id="report-list"></div>
  </div>

  <!-- PAYMENTS -->
  <div id="page-payments" class="page">
    <div class="page-header">
      <div>
        <div class="page-title">ğŸ’³ Payment Tracker</div>
        <div class="page-sub">Monthly medical expense overview</div>
      </div>
      <button class="btn btn-primary" onclick="openModal('pay-modal')">+ Add Payment</button>
    </div>
    <div class="grid-4" style="margin-bottom:24px;" id="pay-stats"></div>
    <div class="card">
      <div class="section-title">Transaction History</div>
      <div id="pay-list"></div>
    </div>
  </div>

</div>

<!-- MEDICINE MODAL -->
<div class="modal-overlay" id="med-modal">
  <div class="modal-box">
    <div class="modal-header">
      <span class="modal-title">Add New Medicine</span>
      <button class="modal-close" onclick="closeModal('med-modal')">âœ•</button>
    </div>
    <div class="field"><label>Medicine Name</label><input id="med-name" placeholder="e.g. Metformin"/></div>
    <div class="field"><label>Dosage</label><input id="med-dose" placeholder="e.g. 500mg"/></div>
    <div class="field"><label>Frequency</label>
      <select id="med-freq">
        <option value="once">Once daily</option>
        <option value="twice">Twice daily</option>
        <option value="thrice">Thrice daily</option>
      </select>
    </div>
    <div class="grid-2-form">
      <div class="field"><label>Start Date</label><input type="date" id="med-start"/></div>
      <div class="field"><label>End Date</label><input type="date" id="med-end"/></div>
    </div>
    <div class="modal-btns">
      <button class="btn btn-primary btn-full" onclick="addMed()">Save Medicine</button>
      <button class="btn btn-ghost btn-full" onclick="closeModal('med-modal')">Cancel</button>
    </div>
  </div>
</div>

<!-- APPOINTMENT MODAL -->
<div class="modal-overlay" id="appt-modal">
  <div class="modal-box">
    <div class="modal-header">
      <span class="modal-title">Add Appointment</span>
      <button class="modal-close" onclick="closeModal('appt-modal')">âœ•</button>
    </div>
    <div class="field"><label>Doctor Name</label><input id="appt-doc" placeholder="e.g. Dr. Priya Sharma"/></div>
    <div class="field"><label>Clinic / Hospital</label><input id="appt-clinic" placeholder="e.g. Apollo Hospital"/></div>
    <div class="field"><label>Date & Time</label><input type="datetime-local" id="appt-dt"/></div>
    <div class="field"><label>Notes (Optional)</label><textarea id="appt-notes" placeholder="Add any notes..." rows="3"></textarea></div>
    <div class="modal-btns">
      <button class="btn btn-primary btn-full" onclick="addAppt()">Save Appointment</button>
      <button class="btn btn-ghost btn-full" onclick="closeModal('appt-modal')">Cancel</button>
    </div>
  </div>
</div>

<!-- REPORT MODAL -->
<div class="modal-overlay" id="report-modal">
  <div class="modal-box">
    <div class="modal-header">
      <span class="modal-title">Add Report / Prescription</span>
      <button class="modal-close" onclick="closeModal('report-modal')">âœ•</button>
    </div>
    <div class="field"><label>Document Name</label><input id="rep-name" placeholder="e.g. CBC Blood Test Report"/></div>
    <div class="field"><label>Category</label>
      <select id="rep-cat">
        <option>Blood Test</option>
        <option>X-Ray</option>
        <option>MRI</option>
        <option>Consultation</option>
        <option>Other</option>
      </select>
    </div>
    <div class="field"><label>Date</label><input type="date" id="rep-date"/></div>
    <div class="upload-area">ğŸ“ Drag & drop files here or <span class="upload-link">browse</span><br/><span style="font-size:11px;">PDF, JPG, PNG supported</span></div>
    <div class="modal-btns">
      <button class="btn btn-primary btn-full" onclick="addReport()">Save Report</button>
      <button class="btn btn-ghost btn-full" onclick="closeModal('report-modal')">Cancel</button>
    </div>
  </div>
</div>

<!-- PAYMENT MODAL -->
<div class="modal-overlay" id="pay-modal">
  <div class="modal-box">
    <div class="modal-header">
      <span class="modal-title">Add Payment</span>
      <button class="modal-close" onclick="closeModal('pay-modal')">âœ•</button>
    </div>
    <div class="field"><label>Type</label>
      <select id="pay-type">
        <option>Consultation</option>
        <option>Medicine</option>
        <option>Lab Test</option>
      </select>
    </div>
    <div class="field"><label>Description</label><input id="pay-desc" placeholder="e.g. Dr. Sharma visit"/></div>
    <div class="grid-2-form">
      <div class="field"><label>Amount (â‚¹)</label><input type="number" id="pay-amt" placeholder="e.g. 800"/></div>
      <div class="field"><label>Date</label><input type="date" id="pay-date"/></div>
    </div>
    <div class="modal-btns">
      <button class="btn btn-primary btn-full" onclick="addPayment()">Save Payment</button>
      <button class="btn btn-ghost btn-full" onclick="closeModal('pay-modal')">Cancel</button>
    </div>
  </div>
</div>

<script>
// â”€â”€â”€ DATA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let meds = [
  {id:1,name:"Metformin",dosage:"500mg",frequency:"twice",startDate:"2025-02-01",endDate:"2025-04-01"},
  {id:2,name:"Amlodipine",dosage:"5mg",frequency:"once",startDate:"2025-01-15",endDate:"2025-05-15"},
];
let appts = [
  {id:1,doctor:"Dr. Priya Sharma",clinic:"Apollo Hospital",dateTime:"2025-02-25T10:30",notes:"Regular checkup"},
  {id:2,doctor:"Dr. Arun Mehta",clinic:"City Diagnostics",dateTime:"2025-03-05T14:00",notes:"Blood sugar follow-up"},
];
let reports = [
  {id:1,name:"CBC Blood Test",category:"Blood Test",date:"2025-02-10"},
  {id:2,name:"Chest X-Ray",category:"X-Ray",date:"2025-01-28"},
];
let payments = [
  {id:1,type:"Consultation",description:"Dr. Priya Sharma visit",amount:800,date:"2025-02-10"},
  {id:2,type:"Medicine",description:"Monthly medicines",amount:1250,date:"2025-02-12"},
  {id:3,type:"Lab Test",description:"Blood test panel",amount:650,date:"2025-02-10"},
];

// â”€â”€â”€ COLORS / CONFIG â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const freqLabel = {once:"Once daily",twice:"Twice daily",thrice:"Thrice daily"};
const freqColor = {once:"#00E5A0",twice:"#3B82F6",thrice:"#A855F7"};
const catColor  = {"Blood Test":"#EF4444","X-Ray":"#3B82F6","MRI":"#A855F7","Consultation":"#F97316","Other":"#00E5A0"};
const catIcon   = {"Blood Test":"ğŸ©¸","X-Ray":"ğŸ¦·","MRI":"ğŸ§ ","Consultation":"ğŸ‘¨â€âš•ï¸","Other":"ğŸ“„"};
const payColor  = {"Consultation":"#3B82F6","Medicine":"#00E5A0","Lab Test":"#A855F7"};
const payIcon   = {"Consultation":"ğŸ‘¨â€âš•ï¸","Medicine":"ğŸ’Š","Lab Test":"ğŸ§ª"};

// â”€â”€â”€ SIDEBAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let sidebarOpen = true;
function toggleSidebar(){
  sidebarOpen = !sidebarOpen;
  const sb = document.getElementById('sidebar');
  const btn = sb.querySelector('.toggle-btn');
  sb.classList.toggle('collapsed', !sidebarOpen);
  btn.textContent = sidebarOpen ? 'â—€' : 'â–¶';
}

// â”€â”€â”€ NAVIGATION â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function showPage(id, btn){
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.querySelectorAll('.nav-btn').forEach(b => {
    b.classList.remove('active');
    const dot = b.querySelector('.nav-dot');
    if(dot) dot.remove();
  });
  document.getElementById('page-'+id).classList.add('active');
  btn.classList.add('active');
  const dot = document.createElement('span');
  dot.className = 'nav-dot';
  btn.appendChild(dot);
  renderAll();
}

// â”€â”€â”€ MODAL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function openModal(id){ document.getElementById(id).classList.add('open'); }
function closeModal(id){ document.getElementById(id).classList.remove('open'); }
document.querySelectorAll('.modal-overlay').forEach(m => {
  m.addEventListener('click', e => { if(e.target === m) m.classList.remove('open'); });
});

// â”€â”€â”€ DATE HELPERS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function dayDiff(dt){
  const today = new Date(); today.setHours(0,0,0,0);
  const d = new Date(dt); d.setHours(0,0,0,0);
  return Math.round((d-today)/86400000);
}
function fmtDate(str){
  if(!str) return 'â€”';
  const d = new Date(str);
  return d.toLocaleDateString('en-IN',{day:'numeric',month:'short',year:'numeric'});
}
function fmtTime(str){
  const d = new Date(str);
  return d.toLocaleTimeString('en-IN',{hour:'2-digit',minute:'2-digit'});
}

// â”€â”€â”€ RENDER DASHBOARD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderDashboard(){
  const today = new Date();
  document.getElementById('dash-date').textContent =
    today.toLocaleDateString('en-IN',{weekday:'long',day:'numeric',month:'long',year:'numeric'});

  const upcoming = appts.filter(a => new Date(a.dateTime) > today)
    .sort((a,b) => new Date(a.dateTime)-new Date(b.dateTime));
  const total = payments.reduce((s,p)=>s+Number(p.amount),0);

  document.getElementById('stat-meds').textContent = meds.length;
  document.getElementById('stat-appts').textContent = appts.length;
  document.getElementById('stat-appts-sub').textContent = upcoming.length+' upcoming';
  document.getElementById('stat-reports').textContent = reports.length;
  document.getElementById('stat-spend').textContent = 'â‚¹'+total.toLocaleString('en-IN');

  // Meds list
  const ml = document.getElementById('dash-meds-list');
  if(!meds.length){ ml.innerHTML='<div style="color:var(--muted);font-size:14px;">No medicines added</div>'; }
  else {
    ml.innerHTML = meds.map(m=>`
      <div class="inner-row" style="display:flex;justify-content:space-between;align-items:center;">
        <div>
          <div style="font-weight:600;font-size:14px;">${m.name}</div>
          <div style="font-size:12px;color:var(--muted);">${m.dosage} Â· ${freqLabel[m.frequency]}</div>
        </div>
        <span class="pulse-dot"></span>
      </div>`).join('');
  }

  // Appts list
  const al = document.getElementById('dash-appts-list');
  if(!upcoming.length){ al.innerHTML='<div style="color:var(--muted);font-size:14px;">No upcoming appointments</div>'; }
  else {
    al.innerHTML = upcoming.slice(0,3).map(a=>{
      const diff = dayDiff(a.dateTime);
      const label = diff===0?'Today':diff===1?'Tomorrow':`${diff}d`;
      const bClass = diff<=1?'badge-red':'badge-blue';
      return `
        <div class="inner-row">
          <div style="display:flex;justify-content:space-between;">
            <div style="font-weight:600;font-size:14px;">${a.doctor}</div>
            <span class="badge ${bClass}">${label}</span>
          </div>
          <div style="font-size:12px;color:var(--muted);margin-top:2px;">${a.clinic} Â· ${fmtTime(a.dateTime)}</div>
        </div>`;
    }).join('');
  }
}

// â”€â”€â”€ RENDER MEDICINES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderMeds(){
  document.getElementById('med-count').textContent = meds.length+' medicines being tracked';
  const list = document.getElementById('med-list');
  if(!meds.length){
    list.innerHTML=`<div class="card empty"><div class="empty-icon">ğŸ’Š</div><div>No medicines added yet</div></div>`;
    return;
  }
  list.innerHTML = meds.map(m=>`
    <div class="card" style="position:relative;overflow:hidden;">
      <div class="med-top" style="background:${freqColor[m.frequency]||'#00E5A0'};"></div>
      <div style="display:flex;justify-content:space-between;align-items:flex-start;margin-top:4px;">
        <div>
          <div style="font-family:'Syne',sans-serif;font-weight:700;font-size:17px;">${m.name}</div>
          <div style="color:var(--muted);font-size:14px;margin-top:2px;">${m.dosage}</div>
        </div>
        <span class="badge" style="background:${freqColor[m.frequency]||'#00E5A0'}20;color:${freqColor[m.frequency]||'#00E5A0'};border-radius:20px;">
          ${freqLabel[m.frequency]}
        </span>
      </div>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:14px;">
        <div class="inner-row">
          <div style="font-size:10px;color:var(--muted);margin-bottom:2px;">START</div>
          <div style="font-size:13px;font-weight:500;">${m.startDate||'â€”'}</div>
        </div>
        <div class="inner-row">
          <div style="font-size:10px;color:var(--muted);margin-bottom:2px;">END</div>
          <div style="font-size:13px;font-weight:500;">${m.endDate||'â€”'}</div>
        </div>
      </div>
      <div style="display:flex;justify-content:flex-end;margin-top:12px;">
        <button class="btn btn-danger" onclick="deleteMed(${m.id})">Remove</button>
      </div>
    </div>`).join('');
}

// â”€â”€â”€ RENDER APPOINTMENTS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderAppts(){
  document.getElementById('appt-count').textContent = appts.length+' appointments scheduled';
  const list = document.getElementById('appt-list');
  if(!appts.length){
    list.innerHTML=`<div class="card empty"><div class="empty-icon">ğŸ“…</div><div>No appointments added yet</div></div>`;
    return;
  }
  const today = new Date();
  const sorted = [...appts].sort((a,b)=>new Date(a.dateTime)-new Date(b.dateTime));
  list.innerHTML = sorted.map(a=>{
    const d = new Date(a.dateTime);
    const isPast = d < today;
    const diff = dayDiff(a.dateTime);
    const label = isPast?'Past':diff===0?'Today':diff===1?'Tomorrow':`In ${diff} days`;
    const bClass = isPast?'badge-muted':diff<=1?'badge-red':'badge-blue';
    const bgColor = isPast?'var(--border)':'var(--blue-dim)';
    const numColor = isPast?'var(--muted)':'var(--blue)';
    return `
      <div class="card">
        <div style="display:flex;justify-content:space-between;align-items:flex-start;">
          <div style="display:flex;gap:16px;align-items:center;">
            <div style="background:${bgColor};border-radius:12px;padding:10px 14px;text-align:center;min-width:56px;">
              <div style="font-size:18px;font-family:'Syne',sans-serif;font-weight:800;color:${numColor};">${d.getDate()}</div>
              <div style="font-size:10px;color:var(--muted);">${d.toLocaleString('en-IN',{month:'short'})}</div>
            </div>
            <div>
              <div style="font-family:'Syne',sans-serif;font-weight:700;font-size:16px;">${a.doctor}</div>
              <div style="color:var(--muted);font-size:13px;margin-top:2px;">${a.clinic}</div>
              <div style="color:var(--sub);font-size:13px;margin-top:2px;">ğŸ• ${fmtTime(a.dateTime)}${a.notes?` &nbsp;ğŸ“ ${a.notes}`:''}</div>
            </div>
          </div>
          <div style="display:flex;flex-direction:column;align-items:flex-end;gap:8px;">
            <span class="badge ${bClass}">${label}</span>
            <button class="btn btn-danger" onclick="deleteAppt(${a.id})">Remove</button>
          </div>
        </div>
      </div>`;
  }).join('');
}

// â”€â”€â”€ RENDER REPORTS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderReports(){
  document.getElementById('report-count').textContent = reports.length+' documents stored';
  const cats = ["Blood Test","X-Ray","MRI","Consultation","Other"];

  document.getElementById('report-cats').innerHTML = cats.map(c=>{
    const count = reports.filter(r=>r.category===c).length;
    return `
      <div class="stat-card" style="padding:14px 18px;">
        <div style="font-size:11px;color:var(--muted);text-transform:uppercase;letter-spacing:1px;">${catIcon[c]} ${c}</div>
        <div style="font-family:'Syne',sans-serif;font-weight:800;font-size:26px;margin-top:4px;color:${catColor[c]||'#00E5A0'};">${count}</div>
      </div>`;
  }).join('');

  const list = document.getElementById('report-list');
  if(!reports.length){
    list.innerHTML=`<div class="card empty"><div class="empty-icon">ğŸ“‚</div><div>No reports uploaded yet</div></div>`;
    return;
  }
  const sorted = [...reports].sort((a,b)=>new Date(b.date)-new Date(a.date));
  list.innerHTML = sorted.map(r=>`
    <div class="card" style="padding:14px 18px;">
      <div style="display:flex;justify-content:space-between;align-items:center;">
        <div style="display:flex;gap:14px;align-items:center;">
          <div style="width:42px;height:42px;border-radius:10px;background:${catColor[r.category]||'#00E5A0'}20;display:flex;align-items:center;justify-content:center;font-size:20px;">
            ${catIcon[r.category]||'ğŸ“„'}
          </div>
          <div>
            <div style="font-weight:600;font-size:15px;">${r.name}</div>
            <div style="font-size:12px;color:var(--muted);margin-top:2px;">${r.date} Â· <span style="color:${catColor[r.category]||'#00E5A0'};">${r.category}</span></div>
          </div>
        </div>
        <div style="display:flex;gap:8px;">
          <button class="btn btn-blue">ğŸ“¥ View</button>
          <button class="btn btn-danger" onclick="deleteReport(${r.id})">âœ•</button>
        </div>
      </div>
    </div>`).join('');
}

// â”€â”€â”€ RENDER PAYMENTS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderPayments(){
  const total = payments.reduce((s,p)=>s+Number(p.amount),0);
  const byType = {"Consultation":0,"Medicine":0,"Lab Test":0};
  payments.forEach(p=>{ byType[p.type]=(byType[p.type]||0)+Number(p.amount); });

  document.getElementById('pay-stats').innerHTML = `
    <div class="stat-card">
      <div style="display:flex;justify-content:space-between;align-items:flex-start;">
        <div><div class="stat-label">Total Spent</div><div class="stat-value" style="color:var(--orange);">â‚¹${total.toLocaleString('en-IN')}</div></div>
        <div class="stat-icon" style="background:var(--orange-dim);">ğŸ“Š</div>
      </div>
    </div>
    <div class="stat-card">
      <div style="display:flex;justify-content:space-between;align-items:flex-start;">
        <div><div class="stat-label">Consultation</div><div class="stat-value" style="color:var(--blue);">â‚¹${byType.Consultation.toLocaleString('en-IN')}</div></div>
        <div class="stat-icon" style="background:var(--blue-dim);">ğŸ‘¨â€âš•ï¸</div>
      </div>
    </div>
    <div class="stat-card">
      <div style="display:flex;justify-content:space-between;align-items:flex-start;">
        <div><div class="stat-label">Medicines</div><div class="stat-value" style="color:var(--accent);">â‚¹${byType.Medicine.toLocaleString('en-IN')}</div></div>
        <div class="stat-icon" style="background:var(--accent-dim);">ğŸ’Š</div>
      </div>
    </div>
    <div class="stat-card">
      <div style="display:flex;justify-content:space-between;align-items:flex-start;">
        <div><div class="stat-label">Lab Tests</div><div class="stat-value" style="color:var(--purple);">â‚¹${byType["Lab Test"].toLocaleString('en-IN')}</div></div>
        <div class="stat-icon" style="background:var(--purple-dim);">ğŸ§ª</div>
      </div>
    </div>`;

  const list = document.getElementById('pay-list');
  if(!payments.length){
    list.innerHTML=`<div style="text-align:center;padding:32px;color:var(--muted);">No payments recorded yet</div>`;
    return;
  }
  const sorted = [...payments].sort((a,b)=>new Date(b.date)-new Date(a.date));
  list.innerHTML = sorted.map(p=>`
    <div class="inner-row-lg" style="display:flex;justify-content:space-between;align-items:center;">
      <div style="display:flex;gap:12px;align-items:center;">
        <div style="width:38px;height:38px;border-radius:10px;background:${payColor[p.type]||'#00E5A0'}20;display:flex;align-items:center;justify-content:center;font-size:18px;">
          ${payIcon[p.type]||'ğŸ’°'}
        </div>
        <div>
          <div style="font-weight:600;font-size:14px;">${p.description}</div>
          <div style="font-size:12px;color:var(--muted);">${p.date} Â· <span style="color:${payColor[p.type]||'#00E5A0'};">${p.type}</span></div>
        </div>
      </div>
      <div style="display:flex;gap:12px;align-items:center;">
        <div style="font-family:'Syne',sans-serif;font-weight:700;font-size:17px;">â‚¹${Number(p.amount).toLocaleString('en-IN')}</div>
        <button onclick="deletePayment(${p.id})" style="background:none;border:none;color:var(--muted);font-size:16px;cursor:pointer;">âœ•</button>
      </div>
    </div>`).join('');
}

// â”€â”€â”€ ADD FUNCTIONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function addMed(){
  const name = document.getElementById('med-name').value.trim();
  const dose = document.getElementById('med-dose').value.trim();
  if(!name||!dose){ alert('Please fill in medicine name and dosage.'); return; }
  meds.push({
    id:Date.now(), name, dosage:dose,
    frequency: document.getElementById('med-freq').value,
    startDate: document.getElementById('med-start').value,
    endDate:   document.getElementById('med-end').value,
  });
  ['med-name','med-dose','med-start','med-end'].forEach(id=>document.getElementById(id).value='');
  document.getElementById('med-freq').value='once';
  closeModal('med-modal');
  renderAll();
}

function addAppt(){
  const doc = document.getElementById('appt-doc').value.trim();
  const dt  = document.getElementById('appt-dt').value;
  if(!doc||!dt){ alert('Please fill in doctor name and date/time.'); return; }
  appts.push({
    id:Date.now(), doctor:doc,
    clinic: document.getElementById('appt-clinic').value.trim(),
    dateTime: dt,
    notes:  document.getElementById('appt-notes').value.trim(),
  });
  ['appt-doc','appt-clinic','appt-dt','appt-notes'].forEach(id=>document.getElementById(id).value='');
  closeModal('appt-modal');
  renderAll();
}

function addReport(){
  const name = document.getElementById('rep-name').value.trim();
  const date = document.getElementById('rep-date').value;
  if(!name||!date){ alert('Please fill in name and date.'); return; }
  reports.push({
    id:Date.now(), name,
    category: document.getElementById('rep-cat').value,
    date,
  });
  ['rep-name','rep-date'].forEach(id=>document.getElementById(id).value='');
  closeModal('report-modal');
  renderAll();
}

function addPayment(){
  const desc = document.getElementById('pay-desc').value.trim();
  const amt  = document.getElementById('pay-amt').value;
  const date = document.getElementById('pay-date').value;
  if(!desc||!amt||!date){ alert('Please fill in all fields.'); return; }
  payments.push({
    id:Date.now(),
    type: document.getElementById('pay-type').value,
    description: desc, amount: Number(amt), date,
  });
  ['pay-desc','pay-amt','pay-date'].forEach(id=>document.getElementById(id).value='');
  closeModal('pay-modal');
  renderAll();
}

// â”€â”€â”€ DELETE FUNCTIONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function deleteMed(id){ meds = meds.filter(m=>m.id!==id); renderAll(); }
function deleteAppt(id){ appts = appts.filter(a=>a.id!==id); renderAll(); }
function deleteReport(id){ reports = reports.filter(r=>r.id!==id); renderAll(); }
function deletePayment(id){ payments = payments.filter(p=>p.id!==id); renderAll(); }

// â”€â”€â”€ RENDER ALL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderAll(){
  renderDashboard();
  renderMeds();
  renderAppts();
  renderReports();
  renderPayments();
}

// â”€â”€â”€ INIT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
renderAll();
</script>
<!-- FOOTER -->
<div style="
  position:fixed;bottom:0;left:0;right:0;
  padding:10px 24px;
  background:rgba(10,15,30,0.92);
  backdrop-filter:blur(8px);
  border-top:1px solid #1E2A3A;
  display:flex;align-items:center;justify-content:center;
  gap:8px;z-index:50;
">
  <span style="font-size:12px;color:#475569;">Â© 2025 MedFit. Designed & Developed by</span>
  <span style="font-family:'Syne',sans-serif;font-weight:700;font-size:13px;color:#00E5A0;letter-spacing:0.3px;">Pratik Kaduskar</span>
  <span style="font-size:12px;color:#475569;">Â· All rights reserved.</span>
</div>

<!-- Bottom padding so content doesn't hide behind footer -->
<style>
  #main { padding-bottom: 56px !important; }
</style>

</body>
</html>
